{"version":3,"file":"js/Users.634fb21e.js","mappings":"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","sources":["webpack://vue_shop_project/./src/components/user/Users.vue","webpack://vue_shop_project/src/components/user/Users.vue","webpack://vue_shop_project/./src/components/user/Users.vue?939f","webpack://vue_shop_project/./src/components/user/Users.vue?a8d0"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator\":\">\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"活动管理\")]),_c('el-breadcrumb-item',[_vm._v(\"活动列表\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter:20\":\"\"}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{staticStyle:{\"margin-left\":\"30px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisable = true}}},[_vm._v(\"添加用户\")])],1)],1),[_c('el-table',{attrs:{\"border\":\"\",\"stripe\":\"\",\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"prop\":\"mg_state\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.remvoeUserById(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.showAllotRoleDialog(scope.row)}}})],1)]}}])})],1)],_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[2, 3, 4, 5],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],2),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisable,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisable=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.formRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisable = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定 \")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改数据\",\"visible\":_vm.editDialogVisable,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisable=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.formRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisable = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定 \")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.allotRoleDialogVisable,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.allotRoleDialogVisable=$event},\"close\":function($event){return _vm.allotRoleDialogClosed()}}},[_c('p',[_vm._v(\"当前用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前角色：\"+_vm._s(_vm.userInfo.roleName))]),_c('p',[_vm._v(\" 分配新角色 \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectRoleId),callback:function ($$v) {_vm.selectRoleId=$$v},expression:\"selectRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.allotRoleDialogVisable = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.allotRole()}}},[_vm._v(\"确 定 \")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <div>\r\n      <!-- 面包屑 -->\r\n      <el-breadcrumb separator=\">\">\r\n         <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n         <el-breadcrumb-item>活动管理</el-breadcrumb-item>\r\n         <el-breadcrumb-item>活动列表</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n\r\n      <!-- 卡片视图区域 -->\r\n      <el-card class=\"box-card\">\r\n         <!-- 添加与搜索区域 -->\r\n         <el-row gutter:20>\r\n            <!-- 搜索 -->\r\n            <el-col :span=\"8\">\r\n               <el-input\r\n                  placeholder=\"请输入内容\"\r\n                  clearable\r\n                  v-model=\"queryInfo.query\"\r\n                  @clear=\"getUserList\"\r\n               >\r\n                  <el-button\r\n                     slot=\"append\"\r\n                     icon=\"el-icon-search\"\r\n                     @click=\"getUserList\"\r\n                  ></el-button>\r\n               </el-input>\r\n            </el-col>\r\n\r\n            <!-- 添加 -->\r\n            <el-col :span=\"4\">\r\n               <el-button\r\n                  type=\"primary\"\r\n                  @click=\"addDialogVisable = true\"\r\n                  style=\"margin-left: 30px\"\r\n                  >添加用户</el-button\r\n               >\r\n            </el-col>\r\n         </el-row>\r\n\r\n         <!-- 用户列表区域 -->\r\n         <template>\r\n            <el-table border stripe :data=\"userList\">\r\n               <el-table-column type=\"index\"> </el-table-column>\r\n               <el-table-column prop=\"username\" label=\"姓名\"> </el-table-column>\r\n               <el-table-column prop=\"email\" label=\"邮箱\"> </el-table-column>\r\n               <el-table-column prop=\"mobile\" label=\"电话\"> </el-table-column>\r\n               <el-table-column prop=\"role_name\" label=\"角色\">\r\n               </el-table-column>\r\n               <!-- 用户状态 -->\r\n               <el-table-column prop=\"mg_state\" label=\"状态\">\r\n                  <template slot-scope=\"scope\">\r\n                     <el-switch\r\n                        v-model=\"scope.row.mg_state\"\r\n                        @change=\"userStateChanged(scope.row)\"\r\n                     >\r\n                     </el-switch>\r\n                  </template>\r\n               </el-table-column>\r\n\r\n               <!-- 操作 -->\r\n               <el-table-column label=\"操作\" width=\"180px\">\r\n                  <template slot-scope=\"scope\">\r\n                     <!-- 修改 -->\r\n                     <el-button\r\n                        type=\"primary\"\r\n                        size=\"mini\"\r\n                        icon=\"el-icon-edit\"\r\n                        @click=\"showEditDialog(scope.row.id)\"\r\n                     ></el-button>\r\n\r\n                     <!-- 删除 -->\r\n                     <el-button\r\n                        type=\"danger\"\r\n                        size=\"mini\"\r\n                        icon=\"el-icon-delete\"\r\n                        @click=\"remvoeUserById(scope.row.id)\"\r\n                     ></el-button>\r\n\r\n                     <!-- 分配角色 -->\r\n                     <el-tooltip\r\n                        effect=\"dark\"\r\n                        content=\"分配角色\"\r\n                        placement=\"top\"\r\n                        :enterable=\"false\"\r\n                     >\r\n                        <el-button\r\n                           type=\"warning\"\r\n                           size=\"mini\"\r\n                           icon=\"el-icon-setting\"\r\n                           @click=\"showAllotRoleDialog(scope.row)\"\r\n                        ></el-button>\r\n                     </el-tooltip>\r\n                  </template>\r\n               </el-table-column>\r\n            </el-table>\r\n         </template>\r\n\r\n         <!-- 分页区域 -->\r\n         <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"queryInfo.pagenum\"\r\n            :page-sizes=\"[2, 3, 4, 5]\"\r\n            :page-size=\"queryInfo.pagesize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n         >\r\n         </el-pagination>\r\n      </el-card>\r\n\r\n      <!-- 添加用户对话框 -->\r\n      <el-dialog\r\n         title=\"添加用户\"\r\n         :visible.sync=\"addDialogVisable\"\r\n         width=\"50%\"\r\n         @close=\"addDialogClosed\"\r\n      >\r\n         <!-- 内容主题区 -->\r\n         <!-- 表单区 -->\r\n         <el-form\r\n            :model=\"addForm\"\r\n            :rules=\"formRules\"\r\n            ref=\"addFormRef\"\r\n            label-width=\"70px\"\r\n         >\r\n            <el-form-item label=\"用户名\" prop=\"username\">\r\n               <el-input v-model=\"addForm.username\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n               <el-input v-model=\"addForm.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n               <el-input v-model=\"addForm.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"电话\" prop=\"mobile\">\r\n               <el-input v-model=\"addForm.mobile\"></el-input>\r\n            </el-form-item>\r\n         </el-form>\r\n         <!-- 按钮区 -->\r\n         <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"addDialogVisable = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addUser\">确 定 </el-button>\r\n         </span>\r\n      </el-dialog>\r\n\r\n      <!-- 修改用户对话框 -->\r\n      <el-dialog\r\n         title=\"修改数据\"\r\n         :visible.sync=\"editDialogVisable\"\r\n         width=\"50%\"\r\n         @close=\"editDialogClosed\"\r\n      >\r\n         <!-- 内容主体区 -->\r\n         <!-- 表单区 -->\r\n         <el-form\r\n            :model=\"editForm\"\r\n            :rules=\"formRules\"\r\n            ref=\"editFormRef\"\r\n            label-width=\"70px\"\r\n         >\r\n            <el-form-item label=\"用户名\" prop=\"username\">\r\n               <el-input v-model=\"editForm.username\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n               <el-input v-model=\"editForm.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"电话\" prop=\"mobile\">\r\n               <el-input v-model=\"editForm.mobile\"></el-input>\r\n            </el-form-item>\r\n         </el-form>\r\n         <!-- 按钮区 -->\r\n         <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"editDialogVisable = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"editUserInfo\">确 定 </el-button>\r\n         </span>\r\n      </el-dialog>\r\n\r\n      <!-- 分配权限对话框 -->\r\n      <el-dialog\r\n         title=\"分配权限\"\r\n         :visible.sync=\"allotRoleDialogVisable\"\r\n         width=\"50%\"\r\n         @close=\"allotRoleDialogClosed()\"\r\n      >\r\n         <!-- 内容主体区 -->\r\n         <p>当前用户：{{ userInfo.username }}</p>\r\n         <p>当前角色：{{ userInfo.roleName }}</p>\r\n         <p>\r\n            分配新角色\r\n            <el-select v-model=\"selectRoleId\" placeholder=\"请选择\">\r\n               <el-option\r\n                  v-for=\"item in rolesList\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.roleName\"\r\n                  :value=\"item.id\"\r\n               >\r\n               </el-option>\r\n            </el-select>\r\n         </p>\r\n         <!-- 按钮区 -->\r\n         <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"allotRoleDialogVisable = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"allotRole()\">确 定 </el-button>\r\n         </span>\r\n      </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n   name: 'Users',\r\n   data() {\r\n      // 邮箱校验\r\n      var checkEmail = (rule, value, callback) => {\r\n         const reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n         if (reg.test(value)) return callback()\r\n\r\n         callback(new Error('请输入合法的邮箱'))\r\n      }\r\n      // 电话校验\r\n      var checkMobile = (rule, value, callback) => {\r\n         const reg = /^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n         if (reg.test(value)) return callback()\r\n\r\n         callback(new Error('请输入正确的电话'))\r\n      }\r\n\r\n      return {\r\n         // 获取用户列表参数对象\r\n         queryInfo: {\r\n            query: '',\r\n            // 当前页数\r\n            pagenum: 1,\r\n            // 每页多少条\r\n            pagesize: 2,\r\n         },\r\n         userList: [],\r\n         total: 0,\r\n         // 添加用户对话框可见性\r\n         addDialogVisable: false,\r\n         // 添加用户表单\r\n         addForm: {\r\n            username: '',\r\n            password: '',\r\n            email: '',\r\n            mobile: '',\r\n         },\r\n\r\n         // 修改用户对话框可见性\r\n         editDialogVisable: false,\r\n         // 修改用户表单\r\n         editForm: {},\r\n         // 用户信息\r\n         userInfo: '',\r\n         // 角色列表\r\n         rolesList: [],\r\n         // 选中新角色id\r\n         selectRoleId: '',\r\n         //  分配权限对话框可见性\r\n         allotRoleDialogVisable: false,\r\n         // 用户表单规则\r\n         formRules: {\r\n            username: [\r\n               {\r\n                  required: true,\r\n                  message: '请输入用户名',\r\n                  trigger: 'blur',\r\n               },\r\n               {\r\n                  min: 3,\r\n                  max: 10,\r\n                  message: '长度在 3 到 10 个字符',\r\n                  trigger: 'blur',\r\n               },\r\n            ],\r\n            password: [\r\n               {\r\n                  required: true,\r\n                  message: '请输入密码',\r\n                  trigger: 'blur',\r\n               },\r\n               {\r\n                  min: 6,\r\n                  max: 15,\r\n                  message: '长度在 6 到 15 个字符',\r\n                  trigger: 'blur',\r\n               },\r\n            ],\r\n            email: [\r\n               {\r\n                  required: true,\r\n                  message: '请输入邮箱',\r\n                  trigger: 'blur',\r\n               },\r\n               { validator: checkEmail, trigger: 'blur' },\r\n            ],\r\n            mobile: [\r\n               {\r\n                  required: true,\r\n                  message: '请输入电话',\r\n                  trigger: 'blur',\r\n               },\r\n               { validator: checkMobile, trigger: 'blur' },\r\n            ],\r\n         },\r\n      }\r\n   },\r\n   created() {\r\n      this.getUserList()\r\n   },\r\n   methods: {\r\n      // 获取用户列表\r\n      async getUserList() {\r\n         const { data: res } = await this.$http.get('users', {\r\n            params: this.queryInfo,\r\n         })\r\n         if (res.meta.status !== 200)\r\n            return this.$message.error('获取用户列表失败')\r\n         this.userList = res.data.users\r\n         this.total = res.data.total\r\n         // console.log(res)\r\n      },\r\n      // 监听用户状态改变\r\n      async userStateChanged(userInfo) {\r\n         const { data: res } = await this.$http.put(\r\n            `users/${userInfo.id}/state/${userInfo.mg_state}`\r\n         )\r\n         if (res.meta.status !== 200) {\r\n            userInfo.mg_state = !userInfo.mg_state\r\n            return this.$message.error('更新用户状态失败')\r\n         }\r\n         return this.$message.success('更新用户状态成功')\r\n      },\r\n      // 监听pagesize改变\r\n      handleSizeChange(newSize) {\r\n         this.queryInfo.pagesize = newSize\r\n         this.getUserList()\r\n      },\r\n      // 监听页码改变\r\n      handleCurrentChange(newPage) {\r\n         this.queryInfo.pagenum = newPage\r\n         this.getUserList()\r\n      },\r\n      // 监听添加框关闭\r\n      addDialogClosed() {\r\n         this.$refs.addFormRef.resetFields()\r\n      },\r\n      // 添加用户\r\n      addUser() {\r\n         this.$refs.addFormRef.validate(async (valid) => {\r\n            if (!valid) return\r\n            // 发起请求\r\n            const { data: res } = await this.$http.post('users', this.addForm)\r\n            if (res.meta.status !== 201)\r\n               return this.$message.error('添加用户失败')\r\n            this.$message.success('添加用户成功')\r\n            // 隐藏对话框\r\n            this.addDialogVisable = false\r\n            // 重新获取列表\r\n            this.getUserList()\r\n         })\r\n      },\r\n      // 展示 编辑用户数据 的对话框\r\n      async showEditDialog(id) {\r\n         const { data: res } = await this.$http.get('users/' + id)\r\n         if (res.meta.status !== 200)\r\n            return this.$message.error('查询用户数据失败')\r\n         this.editForm = res.data\r\n         this.editDialogVisable = true\r\n      },\r\n      // 修改用户数据\r\n      editUserInfo() {\r\n         this.$refs.editFormRef.validate(async (valid) => {\r\n            if (!valid) return\r\n            // 发起请求\r\n            const form = {\r\n               email: this.editForm.email,\r\n               mobile: this.editForm.mobile,\r\n            }\r\n            const { data: res } = await this.$http.put(\r\n               'users/' + this.editForm.id,\r\n               form\r\n            )\r\n            if (res.meta.status !== 200)\r\n               return this.$message.error('更新用户信息失败')\r\n            this.$message.success('更新用户信息成功')\r\n            // 隐藏对话框\r\n            this.editDialogVisable = false\r\n            // 重新获取列表\r\n            this.getUserList()\r\n         })\r\n      },\r\n      // 监听编辑用户框关闭\r\n      editDialogClosed() {\r\n         this.$refs.editFormRef.resetFields()\r\n      },\r\n\r\n      // 分配角色对话框显示\r\n      async showAllotRoleDialog(user) {\r\n         this.userInfo = {\r\n            id: user.id,\r\n            username: user.username,\r\n            roleName: user.role_name,\r\n         }\r\n\r\n         const { data: res } = await this.$http.get('roles')\r\n         if (res.meta.status !== 200)\r\n            return this.$message.error('获取角色列表失败')\r\n\r\n         this.rolesList = res.data\r\n\r\n         this.allotRoleDialogVisable = true\r\n      },\r\n      async allotRole() {\r\n         if (!this.selectRoleId)\r\n            return this.$message.error('请选择要分配的角色！')\r\n         const {\r\n            data: res,\r\n         } = await this.$http.put(`users/${this.userInfo.id}/role`, {\r\n            rid: this.selectRoleId,\r\n         })\r\n         if (res.meta.status !== 200)\r\n            return this.$message.error('更新角色失败！')\r\n\r\n         this.$message.success('更新角色成功！')\r\n\r\n         this.getUserList()\r\n\r\n         this.allotRoleDialogVisable = false\r\n      },\r\n      // 监测分配角色框关闭\r\n      allotRoleDialogClosed() {\r\n         this.selectRoleId = ''\r\n         this.userInfo = {}\r\n         this.rolesList = []\r\n      },\r\n\r\n      // 根据id删除用户\r\n      async remvoeUserById(id) {\r\n         // 弹窗询问确定\r\n         const confirmRes = await this.$confirm(\r\n            '确定要永久删除该用户?',\r\n            '警告',\r\n            {\r\n               confirmButtonText: '确定',\r\n               cancelButtonText: '取消',\r\n               type: 'warning',\r\n            }\r\n         ).catch((err) => err)\r\n         // 确定confirm 取消cancal\r\n         // 取消删除\r\n         if (confirmRes !== 'confirm') return this.$message.info('已取消删除')\r\n\r\n         // 确定删除\r\n         const { data: deleteRes } = await this.$http.delete('users/' + id)\r\n         if (deleteRes.meta.status !== 200) {\r\n            return this.$message.error('删除用户失败')\r\n         }\r\n         this.$message.success('删除用户成功')\r\n         // 重新获取列表\r\n         this.getUserList()\r\n      },\r\n   },\r\n}\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"less\" scoped>\r\np {\r\n   text-align: left;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=10d50804&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=10d50804&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10d50804\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","staticClass","on","getUserList","model","value","queryInfo","query","callback","$$v","$set","expression","slot","staticStyle","$event","addDialogVisable","userList","scopedSlots","_u","key","fn","scope","userStateChanged","row","mg_state","showEditDialog","id","remvoeUserById","showAllotRoleDialog","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClosed","ref","addForm","formRules","username","password","email","mobile","addUser","editDialogVisable","editDialogClosed","editForm","editUserInfo","allotRoleDialogVisable","allotRoleDialogClosed","_s","userInfo","roleName","selectRoleId","_l","rolesList","item","allotRole","staticRenderFns","name","data","required","message","trigger","min","max","validator","created","methods","params","form","rid","confirmButtonText","cancelButtonText","type","catch","err","component"],"sourceRoot":""}